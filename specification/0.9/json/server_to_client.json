{
  "$id": "https://a2ui.dev/specification/0.9/server_to_client.json",
  "title": "A2UI Message Schema",
  "description": "Describes a JSON payload for an A2UI (Agent to UI) message, which is used to dynamically construct and update user interfaces.",
  "type": "object",
  "oneOf": [
    {
      "properties": {
        "updateComponents": {
          "type": "object",
          "description": "Updates a surface with a new set of components.",
          "properties": {
            "surfaceId": {
              "type": "string",
              "description": "The unique identifier for the UI surface to be updated. If you are adding a new surface this *must* be a new, unique identified that has never been used for any existing surfaces shown."
            },
            "catalogId": {
              "type": "string",
              "description": "The URI identifier of the component catalog definition used for this update."
            },
            "components": {
              "type": "array",
              "description": "A list containing all UI components for the surface.",
              "minItems": 1,
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "$ref": "common_types.json#/$defs/id"
                  },
                  "weight": {
                    "$ref": "common_types.json#/$defs/weight"
                  },
                  "props": {
                    "description": "The properties for the component.",
                    "$ref": "standard_catalog_definition.json#/$defs/anyComponent"
                  }
                },
                "required": ["id", "props"],
                "additionalProperties": false
              }
            }
          },
          "required": ["surfaceId", "catalogId", "components"],
          "additionalProperties": false
        }
      },
      "required": ["updateComponents"],
      "additionalProperties": false
    },
    {
      "properties": {
        "updateDataModel": {
          "type": "object",
          "description": "Updates the data model for a surface.",
          "properties": {
            "surfaceId": {
              "type": "string",
              "description": "The unique identifier for the UI surface this data model update applies to."
            },
            "path": {
              "type": "string",
              "description": "An optional path to a location within the data model (e.g., '/user/name'). If omitted, or set to '/', the entire data model will be replaced."
            },
            "contents": {
              "type": "object",
              "description": "The data to be updated in the data model. This can be any valid JSON object.",
              "additionalProperties": true
            }
          },
          "required": ["contents", "surfaceId"],
          "additionalProperties": false
        }
      },
      "required": ["updateDataModel"],
      "additionalProperties": false
    },
    {
      "properties": {
        "deleteSurface": {
          "type": "object",
          "description": "Signals the client to delete the surface identified by 'surfaceId'.",
          "properties": {
            "surfaceId": {
              "type": "string",
              "description": "The unique identifier for the UI surface to be deleted."
            }
          },
          "required": ["surfaceId"],
          "additionalProperties": false
        }
      },
      "required": ["deleteSurface"],
      "additionalProperties": false
    }
  ]
}
